{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"allowShadow\"],\n    _excluded2 = [\"style\", \"onDayPress\", \"firstDay\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useMemo, useRef, useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { sameWeek, onSameDateRange, getWeekDates } from \"../../dateutils\";\nimport { toMarkingFormat } from \"../../interface\";\nimport styleConstructor from \"../style\";\nimport WeekDaysNames from \"../../commons/WeekDaysNames\";\nimport Week from \"../week\";\nimport { UpdateSources } from \"../commons\";\nimport constants from \"../../commons/constants\";\nimport { extractCalendarProps } from \"../../componentUpdater\";\nimport CalendarContext from \"../Context\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var NUMBER_OF_PAGES = 6;\nvar NUM_OF_ITEMS = NUMBER_OF_PAGES * 2 + 1;\nvar APPLY_ANDROID_FIX = constants.isAndroid && constants.isRTL;\n\nvar WeekCalendar = function WeekCalendar(props) {\n  var calendarWidth = props.calendarWidth,\n      hideDayNames = props.hideDayNames,\n      current = props.current,\n      theme = props.theme,\n      testID = props.testID,\n      markedDates = props.markedDates;\n  var context = useContext(CalendarContext);\n\n  var _props$allowShadow = props.allowShadow,\n      allowShadow = _props$allowShadow === void 0 ? true : _props$allowShadow,\n      calendarListProps = _objectWithoutProperties(props, _excluded);\n\n  var _extractCalendarProps = extractCalendarProps(calendarListProps),\n      propsStyle = _extractCalendarProps.style,\n      onDayPress = _extractCalendarProps.onDayPress,\n      _extractCalendarProps2 = _extractCalendarProps.firstDay,\n      firstDay = _extractCalendarProps2 === void 0 ? 0 : _extractCalendarProps2,\n      others = _objectWithoutProperties(_extractCalendarProps, _excluded2);\n\n  var date = context.date,\n      numberOfDays = context.numberOfDays,\n      updateSource = context.updateSource,\n      setDate = context.setDate,\n      timelineLeftInset = context.timelineLeftInset;\n  var visibleWeek = useRef(date);\n  var style = useRef(styleConstructor(theme));\n  var items = useRef(getDatesArray(current != null ? current : date, firstDay, numberOfDays));\n\n  var _useState = useState(items.current),\n      _useState2 = _slicedToArray(_useState, 2),\n      listData = _useState2[0],\n      setListData = _useState2[1];\n\n  var changedItems = useRef(constants.isRTL);\n  var list = useRef(null);\n  var currentIndex = useRef(NUMBER_OF_PAGES);\n  useDidUpdate(function () {\n    var _list$current;\n\n    items.current = getDatesArray(date, firstDay, numberOfDays);\n    setListData(items.current);\n    visibleWeek.current = date;\n    list == null ? void 0 : (_list$current = list.current) == null ? void 0 : _list$current.scrollToIndex({\n      index: NUMBER_OF_PAGES,\n      animated: false\n    });\n  }, [numberOfDays]);\n  useDidUpdate(function () {\n    if (updateSource !== UpdateSources.WEEK_SCROLL) {\n      var pageIndex = items.current.findIndex(function (item) {\n        return isCustomNumberOfDays(numberOfDays) ? onSameDateRange({\n          firstDay: item,\n          secondDay: date,\n          numberOfDays: numberOfDays,\n          firstDateInRange: item\n        }) : sameWeek(item, date, firstDay);\n      });\n\n      if (pageIndex !== currentIndex.current) {\n        var _list$current2;\n\n        if (pageIndex >= 0) {\n          visibleWeek.current = items.current[pageIndex];\n          currentIndex.current = pageIndex;\n        } else {\n          visibleWeek.current = date;\n          currentIndex.current = NUMBER_OF_PAGES;\n        }\n\n        pageIndex <= 0 ? onEndReached() : list == null ? void 0 : (_list$current2 = list.current) == null ? void 0 : _list$current2.scrollToIndex({\n          index: pageIndex,\n          animated: false\n        });\n      }\n    }\n  }, [date, updateSource]);\n  var containerWidth = useMemo(function () {\n    return calendarWidth != null ? calendarWidth : constants.screenWidth;\n  }, [calendarWidth]);\n\n  var _onDayPress = useCallback(function (value) {\n    if (onDayPress) {\n      onDayPress(value);\n    } else {\n      setDate == null ? void 0 : setDate(value.dateString, UpdateSources.DAY_PRESS);\n    }\n  }, [onDayPress]);\n\n  var getCurrentWeekMarkings = useCallback(function (date, markings) {\n    if (!markings) {\n      return;\n    }\n\n    var dates = getWeekDates(date, firstDay);\n    return dates == null ? void 0 : dates.reduce(function (acc, date) {\n      var dateString = toMarkingFormat(date);\n      return _objectSpread(_objectSpread({}, acc), markings[dateString] && _defineProperty({}, dateString, markings[dateString]));\n    }, {});\n  }, []);\n  var weekStyle = useMemo(function () {\n    return [{\n      width: containerWidth\n    }, propsStyle];\n  }, [containerWidth, propsStyle]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item;\n    var currentContext = sameWeek(date, item, firstDay) ? context : undefined;\n    var markings = getCurrentWeekMarkings(item, markedDates);\n    return _jsx(Week, _objectSpread(_objectSpread({}, others), {}, {\n      markedDates: markings,\n      current: item,\n      firstDay: firstDay,\n      style: weekStyle,\n      context: currentContext,\n      onDayPress: _onDayPress,\n      numberOfDays: numberOfDays,\n      timelineLeftInset: timelineLeftInset\n    }));\n  }, [firstDay, _onDayPress, context, date, markedDates]);\n  var keyExtractor = useCallback(function (item) {\n    return item;\n  }, []);\n  var renderWeekDaysNames = useMemo(function () {\n    return _jsx(WeekDaysNames, {\n      firstDay: firstDay,\n      style: style.current.dayHeader\n    });\n  }, [firstDay]);\n  var weekCalendarStyle = useMemo(function () {\n    return [allowShadow && style.current.containerShadow, !hideDayNames && style.current.containerWrapper];\n  }, [allowShadow, hideDayNames]);\n  var containerStyle = useMemo(function () {\n    return [style.current.week, style.current.weekCalendar];\n  }, []);\n  var getItemLayout = useCallback(function (_, index) {\n    return {\n      length: containerWidth,\n      offset: containerWidth * index,\n      index: index\n    };\n  }, [containerWidth]);\n  var onEndReached = useCallback(function () {\n    var _list$current3;\n\n    changedItems.current = true;\n    items.current = getDatesArray(visibleWeek.current, firstDay, numberOfDays);\n    setListData(items.current);\n    currentIndex.current = NUMBER_OF_PAGES;\n    list == null ? void 0 : (_list$current3 = list.current) == null ? void 0 : _list$current3.scrollToIndex({\n      index: NUMBER_OF_PAGES,\n      animated: false\n    });\n  }, [firstDay, numberOfDays]);\n  var onViewableItemsChanged = useCallback(function (_ref3) {\n    var _viewableItems$;\n\n    var viewableItems = _ref3.viewableItems;\n\n    if (changedItems.current || viewableItems.length === 0) {\n      changedItems.current = false;\n      return;\n    }\n\n    var currItems = items.current;\n    var newDate = (_viewableItems$ = viewableItems[0]) == null ? void 0 : _viewableItems$.item;\n\n    if (newDate !== visibleWeek.current) {\n      if (APPLY_ANDROID_FIX) {\n        var newDateOffset = -1 * (NUMBER_OF_PAGES - currItems.indexOf(newDate));\n        var adjustedNewDate = currItems[NUMBER_OF_PAGES - newDateOffset];\n        visibleWeek.current = adjustedNewDate;\n        currentIndex.current = currItems.indexOf(adjustedNewDate);\n        setDate(adjustedNewDate, UpdateSources.WEEK_SCROLL);\n\n        if (visibleWeek.current === currItems[currItems.length - 1]) {\n          onEndReached();\n        }\n      } else {\n        currentIndex.current = currItems.indexOf(newDate);\n        visibleWeek.current = newDate;\n        setDate(newDate, UpdateSources.WEEK_SCROLL);\n\n        if (visibleWeek.current === currItems[0]) {\n          onEndReached();\n        }\n      }\n    }\n  }, [onEndReached]);\n  var viewabilityConfigCallbackPairs = useRef([{\n    viewabilityConfig: {\n      itemVisiblePercentThreshold: 20\n    },\n    onViewableItemsChanged: onViewableItemsChanged\n  }]);\n  return _jsxs(View, {\n    testID: testID,\n    style: weekCalendarStyle,\n    children: [!hideDayNames && _jsx(View, {\n      style: containerStyle,\n      children: renderWeekDaysNames\n    }), _jsx(View, {\n      style: style.current.container,\n      children: _jsx(FlatList, {\n        testID: `${testID}.list`,\n        ref: list,\n        style: style.current.container,\n        data: listData,\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        pagingEnabled: true,\n        scrollEnabled: true,\n        renderItem: renderItem,\n        keyExtractor: keyExtractor,\n        initialScrollIndex: NUMBER_OF_PAGES,\n        getItemLayout: getItemLayout,\n        viewabilityConfigCallbackPairs: viewabilityConfigCallbackPairs.current,\n        onEndReached: onEndReached,\n        onEndReachedThreshold: 1 / NUM_OF_ITEMS\n      })\n    })]\n  });\n};\n\nfunction getDateForDayRange(date, weekIndex, numberOfDays) {\n  var d = new XDate(date);\n\n  if (weekIndex !== 0) {\n    d.addDays(numberOfDays * weekIndex);\n  }\n\n  return toMarkingFormat(d);\n}\n\nfunction getDate(date, firstDay, weekIndex, numberOfDays) {\n  var d = new XDate(date);\n  var dayOfTheWeek = d.getDay();\n\n  if (dayOfTheWeek < firstDay && firstDay > 0) {\n    dayOfTheWeek = 7 + dayOfTheWeek;\n  }\n\n  if (weekIndex !== 0) {\n    d.addDays(firstDay - dayOfTheWeek);\n  }\n\n  var newDate = numberOfDays && numberOfDays > 1 ? d.addDays(weekIndex * numberOfDays) : d.addWeeks(weekIndex);\n  var today = new XDate();\n  var offsetFromNow = newDate.diffDays(today);\n  var isSameWeek = offsetFromNow > 0 && offsetFromNow < (numberOfDays != null ? numberOfDays : 7);\n  return toMarkingFormat(isSameWeek ? today : newDate);\n}\n\nfunction getDatesArray(date, firstDay, numberOfDays) {\n  return _toConsumableArray(Array(NUM_OF_ITEMS).keys()).map(function (index) {\n    if (isCustomNumberOfDays(numberOfDays)) {\n      return getDateForDayRange(date, index - NUMBER_OF_PAGES, numberOfDays);\n    }\n\n    return getDate(date, firstDay, index - NUMBER_OF_PAGES);\n  });\n}\n\nfunction isCustomNumberOfDays(numberOfDays) {\n  return numberOfDays && numberOfDays > 1;\n}\n\nWeekCalendar.displayName = 'WeekCalendar';\nexport default WeekCalendar;","map":{"version":3,"names":["XDate","React","useCallback","useContext","useMemo","useRef","useState","sameWeek","onSameDateRange","getWeekDates","toMarkingFormat","styleConstructor","WeekDaysNames","Week","UpdateSources","constants","extractCalendarProps","CalendarContext","useDidUpdate","NUMBER_OF_PAGES","NUM_OF_ITEMS","APPLY_ANDROID_FIX","isAndroid","isRTL","WeekCalendar","props","calendarWidth","hideDayNames","current","theme","testID","markedDates","context","allowShadow","calendarListProps","propsStyle","style","onDayPress","firstDay","others","date","numberOfDays","updateSource","setDate","timelineLeftInset","visibleWeek","items","getDatesArray","listData","setListData","changedItems","list","currentIndex","scrollToIndex","index","animated","WEEK_SCROLL","pageIndex","findIndex","item","isCustomNumberOfDays","secondDay","firstDateInRange","onEndReached","containerWidth","screenWidth","_onDayPress","value","dateString","DAY_PRESS","getCurrentWeekMarkings","markings","dates","reduce","acc","weekStyle","width","renderItem","currentContext","undefined","keyExtractor","renderWeekDaysNames","dayHeader","weekCalendarStyle","containerShadow","containerWrapper","containerStyle","week","weekCalendar","getItemLayout","_","length","offset","onViewableItemsChanged","viewableItems","currItems","newDate","newDateOffset","indexOf","adjustedNewDate","viewabilityConfigCallbackPairs","viewabilityConfig","itemVisiblePercentThreshold","container","getDateForDayRange","weekIndex","d","addDays","getDate","dayOfTheWeek","getDay","addWeeks","today","offsetFromNow","diffDays","isSameWeek","Array","keys","map","displayName"],"sources":["/Users/atsushi/Dev/baby/node_modules/react-native-calendars/src/expandableCalendar/WeekCalendar/index.js"],"sourcesContent":["import XDate from 'xdate';\nimport React, { useCallback, useContext, useMemo, useRef, useState } from 'react';\nimport { FlatList, View } from 'react-native';\nimport { sameWeek, onSameDateRange, getWeekDates } from '../../dateutils';\nimport { toMarkingFormat } from '../../interface';\nimport styleConstructor from '../style';\nimport WeekDaysNames from '../../commons/WeekDaysNames';\nimport Week from '../week';\nimport { UpdateSources } from '../commons';\nimport constants from '../../commons/constants';\nimport { extractCalendarProps } from '../../componentUpdater';\nimport CalendarContext from '../Context';\nimport { useDidUpdate } from '../../hooks';\nexport const NUMBER_OF_PAGES = 6;\nconst NUM_OF_ITEMS = NUMBER_OF_PAGES * 2 + 1; // NUMBER_OF_PAGES before + NUMBER_OF_PAGES after + current\nconst APPLY_ANDROID_FIX = constants.isAndroid && constants.isRTL;\n/**\n * @description: Week calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst WeekCalendar = (props) => {\n    const { calendarWidth, hideDayNames, current, theme, testID, markedDates, } = props;\n    const context = useContext(CalendarContext);\n    const { allowShadow = true, ...calendarListProps } = props;\n    const { style: propsStyle, onDayPress, firstDay = 0, ...others } = extractCalendarProps(calendarListProps);\n    const { date, numberOfDays, updateSource, setDate, timelineLeftInset } = context;\n    const visibleWeek = useRef(date);\n    const style = useRef(styleConstructor(theme));\n    const items = useRef(getDatesArray(current ?? date, firstDay, numberOfDays));\n    const [listData, setListData] = useState(items.current);\n    const changedItems = useRef(constants.isRTL);\n    const list = useRef(null);\n    const currentIndex = useRef(NUMBER_OF_PAGES);\n    useDidUpdate(() => {\n        items.current = getDatesArray(date, firstDay, numberOfDays);\n        setListData(items.current);\n        visibleWeek.current = date;\n        list?.current?.scrollToIndex({ index: NUMBER_OF_PAGES, animated: false });\n    }, [numberOfDays]);\n    useDidUpdate(() => {\n        if (updateSource !== UpdateSources.WEEK_SCROLL) {\n            const pageIndex = items.current.findIndex(item => isCustomNumberOfDays(numberOfDays) ?\n                onSameDateRange({\n                    firstDay: item,\n                    secondDay: date,\n                    numberOfDays: numberOfDays,\n                    firstDateInRange: item\n                }) :\n                sameWeek(item, date, firstDay));\n            if (pageIndex !== currentIndex.current) {\n                if (pageIndex >= 0) {\n                    visibleWeek.current = items.current[pageIndex];\n                    currentIndex.current = pageIndex;\n                }\n                else {\n                    visibleWeek.current = date;\n                    currentIndex.current = NUMBER_OF_PAGES;\n                }\n                pageIndex <= 0 ? onEndReached() : list?.current?.scrollToIndex({ index: pageIndex, animated: false });\n            }\n        }\n    }, [date, updateSource]);\n    const containerWidth = useMemo(() => {\n        return calendarWidth ?? constants.screenWidth;\n    }, [calendarWidth]);\n    const _onDayPress = useCallback((value) => {\n        if (onDayPress) {\n            onDayPress(value);\n        }\n        else {\n            setDate?.(value.dateString, UpdateSources.DAY_PRESS);\n        }\n    }, [onDayPress]);\n    const getCurrentWeekMarkings = useCallback((date, markings) => {\n        if (!markings) {\n            return;\n        }\n        const dates = getWeekDates(date, firstDay);\n        return dates?.reduce((acc, date) => {\n            const dateString = toMarkingFormat(date);\n            return {\n                ...acc,\n                ...(markings[dateString] && { [dateString]: markings[dateString] }),\n            };\n        }, {});\n    }, []);\n    const weekStyle = useMemo(() => {\n        return [{ width: containerWidth }, propsStyle];\n    }, [containerWidth, propsStyle]);\n    const renderItem = useCallback(({ item }) => {\n        const currentContext = sameWeek(date, item, firstDay) ? context : undefined;\n        const markings = getCurrentWeekMarkings(item, markedDates);\n        return (<Week {...others} markedDates={markings} current={item} firstDay={firstDay} style={weekStyle} context={currentContext} onDayPress={_onDayPress} numberOfDays={numberOfDays} timelineLeftInset={timelineLeftInset}/>);\n    }, [firstDay, _onDayPress, context, date, markedDates]);\n    const keyExtractor = useCallback((item) => item, []);\n    const renderWeekDaysNames = useMemo(() => {\n        return (<WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>);\n    }, [firstDay]);\n    const weekCalendarStyle = useMemo(() => {\n        return [\n            allowShadow && style.current.containerShadow,\n            !hideDayNames && style.current.containerWrapper\n        ];\n    }, [allowShadow, hideDayNames]);\n    const containerStyle = useMemo(() => {\n        return [style.current.week, style.current.weekCalendar];\n    }, []);\n    const getItemLayout = useCallback((_, index) => {\n        return {\n            length: containerWidth,\n            offset: containerWidth * index,\n            index\n        };\n    }, [containerWidth]);\n    const onEndReached = useCallback(() => {\n        changedItems.current = true;\n        items.current = (getDatesArray(visibleWeek.current, firstDay, numberOfDays));\n        setListData(items.current);\n        currentIndex.current = NUMBER_OF_PAGES;\n        list?.current?.scrollToIndex({ index: NUMBER_OF_PAGES, animated: false });\n    }, [firstDay, numberOfDays]);\n    const onViewableItemsChanged = useCallback(({ viewableItems }) => {\n        if (changedItems.current || viewableItems.length === 0) {\n            changedItems.current = false;\n            return;\n        }\n        const currItems = items.current;\n        const newDate = viewableItems[0]?.item;\n        if (newDate !== visibleWeek.current) {\n            if (APPLY_ANDROID_FIX) {\n                //in android RTL the item we see is the one in the opposite direction\n                const newDateOffset = -1 * (NUMBER_OF_PAGES - currItems.indexOf(newDate));\n                const adjustedNewDate = currItems[NUMBER_OF_PAGES - newDateOffset];\n                visibleWeek.current = adjustedNewDate;\n                currentIndex.current = currItems.indexOf(adjustedNewDate);\n                setDate(adjustedNewDate, UpdateSources.WEEK_SCROLL);\n                if (visibleWeek.current === currItems[currItems.length - 1]) {\n                    onEndReached();\n                }\n            }\n            else {\n                currentIndex.current = currItems.indexOf(newDate);\n                visibleWeek.current = newDate;\n                setDate(newDate, UpdateSources.WEEK_SCROLL);\n                if (visibleWeek.current === currItems[0]) {\n                    onEndReached();\n                }\n            }\n        }\n    }, [onEndReached]);\n    const viewabilityConfigCallbackPairs = useRef([{\n            viewabilityConfig: {\n                itemVisiblePercentThreshold: 20,\n            },\n            onViewableItemsChanged,\n        }]);\n    return (<View testID={testID} style={weekCalendarStyle}>\n      {!hideDayNames && (<View style={containerStyle}>\n          {renderWeekDaysNames}\n        </View>)}\n      <View style={style.current.container}>\n          <FlatList testID={`${testID}.list`} ref={list} style={style.current.container} data={listData} horizontal showsHorizontalScrollIndicator={false} pagingEnabled scrollEnabled renderItem={renderItem} keyExtractor={keyExtractor} initialScrollIndex={NUMBER_OF_PAGES} getItemLayout={getItemLayout} viewabilityConfigCallbackPairs={viewabilityConfigCallbackPairs.current} onEndReached={onEndReached} onEndReachedThreshold={1 / NUM_OF_ITEMS}/>\n      </View>\n    </View>);\n};\nfunction getDateForDayRange(date, weekIndex, numberOfDays) {\n    const d = new XDate(date);\n    if (weekIndex !== 0) {\n        d.addDays(numberOfDays * weekIndex);\n    }\n    return toMarkingFormat(d);\n}\nfunction getDate(date, firstDay, weekIndex, numberOfDays) {\n    const d = new XDate(date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n    if (weekIndex !== 0) {\n        d.addDays(firstDay - dayOfTheWeek);\n    }\n    const newDate = numberOfDays && numberOfDays > 1 ? d.addDays(weekIndex * numberOfDays) : d.addWeeks(weekIndex);\n    const today = new XDate();\n    const offsetFromNow = newDate.diffDays(today);\n    const isSameWeek = offsetFromNow > 0 && offsetFromNow < (numberOfDays ?? 7);\n    return toMarkingFormat(isSameWeek ? today : newDate);\n}\nfunction getDatesArray(date, firstDay, numberOfDays) {\n    return [...Array(NUM_OF_ITEMS).keys()].map((index) => {\n        if (isCustomNumberOfDays(numberOfDays)) {\n            return getDateForDayRange(date, index - NUMBER_OF_PAGES, numberOfDays);\n        }\n        return getDate(date, firstDay, index - NUMBER_OF_PAGES);\n    });\n}\nfunction isCustomNumberOfDays(numberOfDays) {\n    return numberOfDays && numberOfDays > 1;\n}\nWeekCalendar.displayName = 'WeekCalendar';\nexport default WeekCalendar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}